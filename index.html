<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Charles Git Barber Receipt — Access Protected</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto+Mono&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0; padding: 0;
    background: linear-gradient(135deg, #6b5b95, #9a8c98);
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #2e2e3e;
    transition: background 0.5s ease;
  }

  /* Access Screen */
  #accessScreen {
    background: #f3e6ff;
    border-radius: 20px;
    padding: 45px 35px 35px 35px;
    box-shadow: 0 14px 40px rgba(107, 91, 149, 0.6);
    max-width: 400px;
    width: 90vw;
    text-align: center;
    position: relative;
  }

  #accessScreen h1 {
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    font-size: 2.7rem;
    margin-bottom: 22px;
    color: #3f2c56;
    letter-spacing: 2px;
    user-select: none;
    animation: fadeInSlideDown 1s ease forwards;
  }

  @keyframes fadeInSlideDown {
    0% {opacity: 0; transform: translateY(-30px);}
    100% {opacity: 1; transform: translateY(0);}
  }

  .password-wrapper {
    position: relative;
    margin-top: 32px;
  }

  #password {
    width: 100%;
    padding: 16px 50px 16px 18px;
    font-size: 1.25rem;
    border-radius: 12px;
    border: 2px solid #a093c7;
    outline-color: #9b84b7;
    font-family: 'Roboto Mono', monospace;
    transition: border-color 0.3s;
    background: #f8f2ff;
    color: #3f2c56;
  }
  #password:focus {
    border-color: #6b5b95;
    background: #e9dcff;
  }

  .toggle-eye {
    position: absolute;
    right: 14px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    font-size: 1.5rem;
    user-select: none;
    color: #6b5b95;
    transition: color 0.3s;
  }
  .toggle-eye:hover {
    color: #9a8c98;
  }

  #accessBtn {
    margin-top: 34px;
    background: #5a478b;
    border: none;
    color: white;
    padding: 16px 0;
    width: 100%;
    border-radius: 14px;
    font-size: 1.3rem;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
    transition: background 0.3s, box-shadow 0.3s;
    box-shadow: 0 6px 14px rgba(90, 71, 139, 0.6);
  }
  #accessBtn:hover {
    background: #3f2c56;
    box-shadow: 0 8px 18px rgba(63, 44, 86, 0.8);
  }

  #errorMsg {
    color: #d94f4f;
    margin-top: 18px;
    font-weight: 700;
    height: 26px;
    font-family: 'Roboto Mono', monospace;
  }

  /* Receipt container */
  #receiptContainer {
    display: none;
    background: #fefefe;
    max-width: 780px;
    width: 95vw;
    border-radius: 20px;
    box-shadow: 0 14px 40px rgba(107, 91, 149, 0.35);
    padding: 35px 45px;
    font-family: 'Roboto Mono', monospace;
    color: #2e2e3e;
    transition: box-shadow 0.3s ease;
  }
  #receiptContainer:focus-within {
    box-shadow: 0 14px 40px rgba(74, 71, 163, 0.55);
    outline: none;
  }

  #receiptHeader {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    border-bottom: 3px solid #bfa2db;
    padding-bottom: 15px;
    margin-bottom: 22px;
    gap: 10px;
  }

  #shopName {
    font-family: 'Poppins', sans-serif;
    font-weight: 700;
    color: #5a478b;
    font-size: 2.4rem;
    margin: 0;
    user-select: text;
    border-bottom: 2px dashed transparent;
    padding-bottom: 3px;
    cursor: text;
    transition: border-color 0.3s;
  }
  #shopName:focus {
    outline: none;
    border-bottom: 2px dashed #7e7cc2;
  }

  #shopAddress,
  #shopContact {
    font-size: 1rem;
    color: #6e649f;
    user-select: text;
    border-bottom: 2px dashed transparent;
    padding-bottom: 3px;
    cursor: text;
    transition: border-color 0.3s;
    line-height: 1.3;
    margin: 0;
  }
  #shopAddress:focus,
  #shopContact:focus {
    outline: none;
    border-bottom: 2px dashed #7e7cc2;
  }
  /* reduce spacing between address and phone */
  #shopAddress {
    margin-bottom: 4px;
  }

  /* Receipt Meta (Receipt #, Date, Cashier) */
  #receiptMeta {
    display: flex;
    flex-wrap: wrap;
    gap: 18px;
    margin-bottom: 26px;
    font-size: 1.1rem;
  }
  #receiptMeta label {
    font-weight: 600;
    color: #5a478b;
    user-select: none;
    min-width: 130px;
  }
  #receiptMeta input {
    padding: 8px 14px;
    border-radius: 12px;
    border: 2px solid #bfa2db;
    font-family: 'Roboto Mono', monospace;
    font-size: 1.1rem;
    width: 160px;
    transition: border-color 0.3s;
    color: #3f2c56;
  }
  #receiptMeta input:focus {
    border-color: #7e7cc2;
    outline: none;
    background: #eae5f6;
  }

  /* Client info */
  #clientInfo {
    display: flex;
    flex-wrap: nowrap;
    gap: 12px;
    margin-bottom: 26px;
  }
  #clientInfo input {
    padding: 12px 16px;
    font-size: 1.1rem;
    border-radius: 14px;
    border: 2px solid #bfa2db;
    transition: border-color 0.3s, background 0.3s;
    color: #3f2c56;
    background: #f9f7ff;
  }
  #clientInfo input:focus {
    border-color: #7e7cc2;
    background: #eae5f6;
    outline: none;
  }

  /* Table styling */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 26px;
    font-size: 1.1rem;
  }
  table th, table td {
    border-bottom: 2px solid #bfa2db;
    padding: 14px 10px;
    text-align: left;
    vertical-align: middle;
  }
  table th {
    background: #7e7cc2;
    color: white;
    font-weight: 600;
    user-select: none;
  }

  table td input[type="text"],
  table td input[type="number"] {
    width: 100%;
    padding: 8px 14px;
    border-radius: 12px;
    border: 2px solid #bfa2db;
    font-family: 'Roboto Mono', monospace;
    font-size: 1.1rem;
    box-sizing: border-box;
    transition: border-color 0.3s, background 0.3s;
    color: #3f2c56;
    background: #f9f7ff;
  }
  table td input[type="text"]:focus,
  table td input[type="number"]:focus {
    border-color: #7e7cc2;
    background: #eae5f6;
    outline: none;
  }

  .remove-row-btn {
    background: transparent;
    border: none;
    color: #c04e4e;
    font-size: 1.6rem;
    cursor: pointer;
    user-select: none;
    transition: color 0.3s;
  }
  .remove-row-btn:hover {
    color: #852e2e;
  }

  /* Add service button */
  #addServiceBtn {
    background: #5a478b;
    color: white;
    padding: 16px 24px;
    border: none;
    border-radius: 16px;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    font-size: 1.3rem;
    cursor: pointer;
    transition: background 0.3s, box-shadow 0.3s;
    margin-bottom: 28px;
    box-shadow: 0 5px 15px rgba(90, 71, 139, 0.5);
  }
  #addServiceBtn:hover {
    background: #3f2c56;
    box-shadow: 0 6px 18px rgba(63, 44, 86, 0.7);
  }

  /* Total Section */
  #totalSection {
    text-align: right;
    font-size: 1.75rem;
    font-weight: 700;
    color: #5a478b;
    margin-bottom: 16px;
    user-select: none;
    text-shadow: 0 1px 1px rgba(233, 229, 246, 0.6);
  }

  /* Print and PDF Buttons */
  #actions {
    display: flex;
    justify-content: flex-end;
    gap: 18px;
  }

  #actions button {
    padding: 12px 28px;
    font-size: 1.15rem;
    border: none;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    border-radius: 16px;
    background: #5a478b;
    color: white;
    box-shadow: 0 5px 15px rgba(90, 71, 139, 0.6);
    transition: background 0.3s, box-shadow 0.3s;
  }
  #actions button:hover {
    background: #3f2c56;
    box-shadow: 0 7px 20px rgba(63, 44, 86, 0.8);
  }

  /* Responsive improvements for small screens */
  @media (max-width: 560px) {
    #receiptContainer {
      padding: 28px 22px;
    }

    #receiptHeader {
      flex-direction: column;
      align-items: flex-start;
      gap: 4px;
      padding-bottom: 12px;
      margin-bottom: 18px;
    }

    #shopName {
      font-size: 2.1rem;
    }
    #shopAddress, #shopContact {
      font-size: 0.95rem;
      margin-bottom: 2px;
    }

    #receiptMeta {
      flex-direction: column;
      gap: 12px;
    }
    #receiptMeta label {
      min-width: auto;
    }
    #receiptMeta input {
      width: 100%;
      max-width: 100%;
    }

    /* Fix client info: wrap and reduce input size */
    #clientInfo {
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }
    #clientInfo input {
      flex: 1 1 45%;
      font-size: 1rem;
      padding: 10px 14px;
      border-radius: 12px;
      min-width: 0;
      box-sizing: border-box;
    }

    /* Services table - stack with titles */
    table, thead, tbody, th, td, tr {
      display: block;
      width: 100%;
    }
    thead tr {
      position: absolute;
      top: -9999px;
      left: -9999px;
    }
    tr {
      margin-bottom: 20px;
      border-bottom: 1px solid #bfa2db;
      padding-bottom: 14px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    td {
      border: none;
      padding: 0 !important;
      margin: 0;
      font-size: 1.1rem;
      font-weight: 600;
      color: #4b4175;
    }
    td:last-child {
      text-align: right;
    }

    /* Add labels above inputs */
    td.service-name::before {
      content: "Service";
      display: block;
      font-weight: 700;
      margin-bottom: 4px;
      color: #5a478b;
    }
    td.service-qty::before {
      content: "Quantity";
      display: block;
      font-weight: 700;
      margin-bottom: 4px;
      color: #5a478b;
    }
    td.service-price::before {
      content: "Price ($)";
      display: block;
      font-weight: 700;
      margin-bottom: 4px;
      color: #5a478b;
    }
    td.remove-btn::before {
      content: "Remove";
      display: block;
      font-weight: 700;
      margin-bottom: 4px;
      color: #c04e4e;
      text-align: right;
    }

    td input[type="text"],
    td input[type="number"] {
      width: 100%;
      padding: 10px 14px;
      font-weight: 400;
      color: #3f2c56;
      font-family: 'Roboto Mono', monospace;
      font-size: 1rem;
      background: #f5f1ff;
      border-radius: 12px;
      border: 2px solid #bfa2db;
      transition: border-color 0.3s, background 0.3s;
    }
    td input[type="text"]:focus,
    td input[type="number"]:focus {
      border-color: #7e7cc2;
      background: #e2dbff;
      outline: none;
      font-weight: 600;
    }

    /* Remove button styling */
    .remove-row-btn {
      font-size: 1.8rem;
      color: #c04e4e;
      background: #fdeeee;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
      padding: 4px 10px;
      user-select: none;
    }
    .remove-row-btn:hover {
      background: #fcd5d5;
      color: #7a2727;
    }

    #addServiceBtn {
      font-size: 1.4rem;
      padding: 18px 26px;
      width: 100%;
      box-shadow: 0 6px 18px rgba(90, 71, 139, 0.55);
      border-radius: 16px;
    }

    #totalSection {
      font-size: 2.1rem;
      margin-top: 18px;
      text-align: right;
      font-weight: 700;
      color: #5a478b;
      text-shadow: 0 1px 2px rgba(156, 138, 156, 0.6);
      user-select: none;
    }

    #actions {
      flex-direction: column;
      gap: 14px;
      justify-content: center;
    }
    #actions button {
      width: 100%;
      border-radius: 16px;
    }
  }

  /* Placeholder vanish on focus */
  input:focus::placeholder {
    color: transparent;
  }

  /* Hide print/download buttons when printing */
  @media print {
    #actions {
      display: none !important;
    }
  }
</style>
</head>
<body>

<!-- ACCESS PASSWORD -->
<div id="accessScreen" role="dialog" aria-modal="true" aria-labelledby="accessTitle">
  <h1 id="accessTitle">Enter Access Code</h1>
  <div class="password-wrapper">
    <input
      type="password"
      id="password"
      aria-label="Access Password"
      placeholder="Enter Password"
      autocomplete="off"
      spellcheck="false"
    />
    <span class="toggle-eye" id="togglePassword" role="button" aria-label="Toggle password visibility" tabindex="0">👁️</span>
  </div>
  <button id="accessBtn" aria-describedby="errorMsg">Submit</button>
  <div id="errorMsg" role="alert" aria-live="assertive"></div>
</div>

<!-- RECEIPT -->
<div id="receiptContainer" role="main" tabindex="-1" aria-label="Receipt details">
  <header id="receiptHeader">
    <h2 id="shopName" contenteditable="true" aria-label="Shop Name" spellcheck="false">Charles Git Barber</h2>
    <!--p id="shopAddress" contenteditable="true" aria-label="Shop Address" spellcheck="false">Nairobi, Kenya</p-->
    <p id="shopContact" contenteditable="true" aria-label="Shop Contact" spellcheck="false">Phone: +1 314 365 7077| Email: royalpettyerrandsrv@gmail.com</p>
  </header>

  <section id="receiptMeta">
    <label for="receiptNumber">Receipt #</label>
    <input id="receiptNumber" type="text" placeholder="0000" aria-describedby="receiptNumberDesc" />
    <span id="receiptNumberDesc" class="sr-only">Enter receipt number</span>

    <label for="receiptDate">Date</label>
    <input id="receiptDate" type="date" aria-describedby="receiptDateDesc" />
    <span id="receiptDateDesc" class="sr-only">Select receipt date</span>

    <label for="cashierName">Cashier</label>
    <input id="cashierName" type="text" placeholder="Cashier name" aria-describedby="cashierNameDesc" />
    <span id="cashierNameDesc" class="sr-only">Enter cashier name</span>
  </section>

  <section id="clientInfo">
    <input id="clientName" type="text" placeholder="Client Name" aria-label="Client Name" />
    <input id="clientEmail" type="email" placeholder="Client Email" aria-label="Client Email" />
    <input id="clientPhone" type="tel" placeholder="Client Phone" aria-label="Client Phone" />
  </section>

  <table aria-label="Services table" role="table">
    <thead>
      <tr>
        <th scope="col">Service</th>
        <th scope="col">Quantity</th>
        <th scope="col">Price ($)</th>
        <th scope="col">Remove</th>
      </tr>
    </thead>
    <tbody id="servicesBody" role="rowgroup">
      <!-- Service rows go here -->
    </tbody>
  </table>

  <button id="addServiceBtn" aria-label="Add new service">+ Add Service</button>

  <div id="totalSection" aria-live="polite" aria-atomic="true">Total: $ 0.00</div>

  <div id="actions">
    <button id="printBtn" type="button">Print</button>
    <button id="downloadPdfBtn" type="button">Download PDF</button>
  </div>
</div>

<script>
  (() => {
    const correctPassword = 'kutchee';  // Access password

    const accessScreen = document.getElementById('accessScreen');
    const passwordInput = document.getElementById('password');
    const togglePassword = document.getElementById('togglePassword');
    const accessBtn = document.getElementById('accessBtn');
    const errorMsg = document.getElementById('errorMsg');

    const receiptContainer = document.getElementById('receiptContainer');

    const receiptNumberInput = document.getElementById('receiptNumber');
    const receiptDateInput = document.getElementById('receiptDate');
    const cashierNameInput = document.getElementById('cashierName');

    const clientNameInput = document.getElementById('clientName');
    const clientEmailInput = document.getElementById('clientEmail');
    const clientPhoneInput = document.getElementById('clientPhone');

    const servicesBody = document.getElementById('servicesBody');
    const addServiceBtn = document.getElementById('addServiceBtn');
    const totalSection = document.getElementById('totalSection');

    const printBtn = document.getElementById('printBtn');
    const downloadPdfBtn = document.getElementById('downloadPdfBtn');
    const actions = document.getElementById('actions');

    // Toggle password visibility
    togglePassword.addEventListener('click', () => {
      if(passwordInput.type === 'password') {
        passwordInput.type = 'text';
        togglePassword.textContent = '🙈';
      } else {
        passwordInput.type = 'password';
        togglePassword.textContent = '👁️';
      }
      passwordInput.focus();
    });
    togglePassword.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        togglePassword.click();
      }
    });

    // Access button click or enter key on password
    function checkPassword() {
      if(passwordInput.value.trim() === correctPassword) {
        accessScreen.style.display = 'none';
        receiptContainer.style.display = 'block';
        receiptContainer.focus();
        errorMsg.textContent = '';
        passwordInput.value = '';
        // Set receipt date to today by default
        if(!receiptDateInput.value) {
          const today = new Date().toISOString().split('T')[0];
          receiptDateInput.value = today;
        }
      } else {
        errorMsg.textContent = 'Incorrect password. Please try again.';
        passwordInput.select();
      }
    }

    accessBtn.addEventListener('click', checkPassword);
    passwordInput.addEventListener('keydown', e => {
      if(e.key === 'Enter') {
        e.preventDefault();
        checkPassword();
      }
    });

    // Add a new service row
    function addServiceRow(name = '', qty = 0, price = 0) {
      const tr = document.createElement('tr');

      // Service name cell
      const serviceTd = document.createElement('td');
      serviceTd.classList.add('service-name');
      const serviceInput = document.createElement('input');
      serviceInput.type = 'text';
      serviceInput.placeholder = 'Service';
      serviceInput.value = name;
      serviceInput.setAttribute('aria-label', 'Service name');
      serviceInput.spellcheck = false;
      serviceTd.appendChild(serviceInput);

      // Quantity cell
      const qtyTd = document.createElement('td');
      qtyTd.classList.add('service-qty');
      const qtyInput = document.createElement('input');
      qtyInput.type = 'number';
      qtyInput.min = '0';
      qtyInput.step = 'any';
      qtyInput.value = qty;
      qtyInput.setAttribute('aria-label', 'Quantity');
      qtyTd.appendChild(qtyInput);

      // Price cell
      const priceTd = document.createElement('td');
      priceTd.classList.add('service-price');
      const priceInput = document.createElement('input');
      priceInput.type = 'number';
      priceInput.min = '0';
      priceInput.step = 'any';
      priceInput.value = price;
      priceInput.setAttribute('aria-label', 'Price in dollars');
      priceTd.appendChild(priceInput);

      // Remove button cell
      const removeTd = document.createElement('td');
      removeTd.classList.add('remove-btn');
      const removeBtn = document.createElement('button');
      removeBtn.type = 'button';
      removeBtn.classList.add('remove-row-btn');
      removeBtn.setAttribute('aria-label', 'Remove service');
      removeBtn.textContent = '×';
      removeBtn.addEventListener('click', () => {
        tr.remove();
        updateTotal();
      });
      removeTd.appendChild(removeBtn);

      tr.appendChild(serviceTd);
      tr.appendChild(qtyTd);
      tr.appendChild(priceTd);
      tr.appendChild(removeTd);

      // Update total on input changes
      [qtyInput, priceInput].forEach(input => {
        input.addEventListener('input', () => {
          updateTotal();
        });
      });
      serviceInput.addEventListener('input', () => {
        // Just for better UX; no total update needed here
      });

      servicesBody.appendChild(tr);
      updateTotal();
    }

    addServiceBtn.addEventListener('click', () => {
      addServiceRow('', 0, 0);
    });

    // Initialize with one empty row
    addServiceRow();

    // Calculate and update total price
    function updateTotal() {
      let total = 0;
      servicesBody.querySelectorAll('tr').forEach(row => {
        const qtyInput = row.querySelector('.service-qty input');
        const priceInput = row.querySelector('.service-price input');

        let qty = parseFloat(qtyInput.value);
        let price = parseFloat(priceInput.value);

        if (isNaN(qty) || qty < 0) qty = 0;
        if (isNaN(price) || price < 0) price = 0;

        total += qty * price;
      });
      totalSection.textContent = `Total: $ ${total.toFixed(2)}`;
    }

    // Print button action
    printBtn.addEventListener('click', () => {
      window.print();
    });

    // Download PDF button action
    downloadPdfBtn.addEventListener('click', () => {
      actions.style.display = 'none'; // Hide buttons during PDF generation

      import('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js').then(({ jsPDF }) => {
        const doc = new jsPDF.jsPDF();

        const leftMargin = 15;
        let y = 20;
        const lineHeight = 10;
        const pageWidth = doc.internal.pageSize.getWidth();

        const shopName = document.getElementById('shopName').textContent.trim();
        const shopAddress = document.getElementById('shopAddress').textContent.trim();
        const shopContact = document.getElementById('shopContact').textContent.trim();
        const receiptNumber = receiptNumberInput.value.trim();
        const receiptDate = receiptDateInput.value;
        const cashierName = cashierNameInput.value.trim();

        const clientName = clientNameInput.value.trim();
        const clientEmail = clientEmailInput.value.trim();
        const clientPhone = clientPhoneInput.value.trim();

        // Header
        doc.setFont('Poppins', 'bold');
        doc.setFontSize(20);
        doc.text(shopName, leftMargin, y);
        y += lineHeight;
        doc.setFontSize(12);
        doc.setFont('Poppins', 'normal');
        doc.text(shopAddress, leftMargin, y);
        y += lineHeight;
        doc.text(shopContact, leftMargin, y);
        y += lineHeight * 1.5;

        // Receipt meta
        doc.setFontSize(14);
        doc.setFont('Poppins', 'bold');
        if(receiptNumber) doc.text(`Receipt #: ${receiptNumber}`, leftMargin, y);
        if(receiptDate) doc.text(`Date: ${receiptDate}`, pageWidth / 2 + 10, y);
        if(cashierName) doc.text(`Cashier: ${cashierName}`, leftMargin, y + lineHeight);
        y += lineHeight * 2.5;

        // Client info
        doc.setFontSize(12);
        doc.setFont('Poppins', 'normal');
        if(clientName) doc.text(`Client Name: ${clientName}`, leftMargin, y);
        y += lineHeight;
        if(clientEmail) doc.text(`Client Email: ${clientEmail}`, leftMargin, y);
        y += lineHeight;
        if(clientPhone) doc.text(`Client Phone: ${clientPhone}`, leftMargin, y);
        y += lineHeight * 1.5;

        // Table header
        doc.setFont('Poppins', 'bold');
        doc.text('Service', leftMargin, y);
        doc.text('Qty', pageWidth / 2 - 15, y);
        doc.text('Price ($)', pageWidth - leftMargin - 50, y, {align: 'right'});
        y += lineHeight;

        doc.setDrawColor(150);
        doc.setLineWidth(0.5);
        doc.line(leftMargin, y - 6, pageWidth - leftMargin, y - 6);

        doc.setFont('Poppins', 'normal');

        // Table rows
        const rows = [];
        servicesBody.querySelectorAll('tr').forEach(row => {
          const serviceName = row.querySelector('.service-name input').value.trim();
          const qty = row.querySelector('.service-qty input').value.trim();
          const price = row.querySelector('.service-price input').value.trim();

          if(serviceName) {
            rows.push({serviceName, qty, price});
          }
        });

        rows.forEach(row => {
          if(y > 270) {
            doc.addPage();
            y = 20;
          }
          doc.text(row.serviceName, leftMargin, y);
          doc.text(row.qty, pageWidth / 2 - 15, y);
          doc.text(`$ ${row.price}`, pageWidth - leftMargin - 50, y, {align: 'right'});
          y += lineHeight;
        });

        // Total
        y += lineHeight;
        doc.setFont('Poppins', 'bold');
        doc.text(totalSection.textContent, pageWidth - leftMargin, y, {align: 'right'});

        doc.save(`Receipt_${receiptNumber || '0000'}.pdf`);

        actions.style.display = 'flex'; // Show buttons again
      });
    });
  })();
</script>

</body>
</html>

